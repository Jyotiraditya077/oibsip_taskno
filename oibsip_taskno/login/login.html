<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <title>Login</title>
</head>

<body>
  <div class="container">
    <div class="card">
      <h2>Login</h2>
      <form action="profile.html">
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" class="form-control" id="email" name="email" placeholder="enter email" />
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" class="form-control" id="password" name="password" placeholder="enter password" />
        </div>
        <br>
        <div class="text-center">
          <button type="button" onclick="saveData()" class="btn btn-primary" id="save_btn">
            Submit
          </button>
          <button type="reset" class="btn btn-warning">
            Reset
          </button>
          <button type="button" class="btn btn-secondary" onclick="Register()">
            Register
          </button>
      </form>
    </div>
  </div>
</body>
<script>
  function Register() {
    window.location.href = "registration.html";
  }
  function saveData() {
    let email, password;
    email = document.getElementById("email").value;
    password = document.getElementById("password").value;

    let user_record = new Array();
    user_record = JSON.parse(localStorage.getItem("users")) ? JSON.parse(localStorage.getItem("users")) : []
    if (user_record.some((v) => {
      return v.email == email && v.password == password
    })) {
      alert("Login Successfull")
      window.location.href = "securepage.html"
      let current_user = user_records.filter((v) => {
        return v.email == email && v.password == password
      })[0]

      localStorage.setItem("name", current_user.name);
      localStorage.setItem("email", current_user.email);

    }
    else {
      alert("Login Fail");
    }
  }
</script>

</html>